```uml
  @startuml
    opt ログイン
      ユーザー -> webサーバー: ログイン
      webサーバー -> DBサーバー: ログイン照会
      DBサーバー -> DBサーバー: ログイン認証
      DBサーバー -> webサーバー: 認証結果
      activate ユーザー
      alt 認証成功
        webサーバー -> ユーザー: ログイン成功メッセージを表示
      else 認証失敗
        webサーバー -> ユーザー: ログイン失敗メッセージを表示
      end
     end
     
    
    opt ログイン中
      ユーザー -> webサーバー: 検索（商品名）
      webサーバー -> DBサーバー: 検索処理（商品名）
      DBサーバー -> DBサーバー: 検索処理
      DBサーバー -> webサーバー: 検索結果
      webサーバー -> ユーザー: 検索結果
      
      ユーザー -> webサーバー: 商品をカートに入れる（商品名）
      webサーバー -> DBサーバー: 商品をカートに入れる（商品名）
      DBサーバー -> DBサーバー: カートに追加処理
      DBサーバー -> webサーバー: 処理結果
      webサーバー -> ユーザー: 処理結果
      
      ユーザー -> webサーバー: 購入（カート内の情報）
      webサーバー -> DBサーバー: 購入処理（カート内の情報）
      DBサーバー -> DBサーバー: 購入処理
      DBサーバー -> webサーバー: 処理結果
      alt 購入成功
        webサーバー -> ユーザー: 購入完了メッセージを表示
      else 購入失敗
        webサーバー -> ユーザー: 購入失敗メッセージを表示
      end
    end
    
    deactivate ユーザー
    
  @enduml
```
